<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatApp - Real-Time Messaging</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Auth Screen -->
    <div id="auth-screen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-header">
                <i class="fas fa-comments"></i>
                <h1>ChatApp</h1>
                <p>Connect with friends and family</p>
            </div>
            
            <!-- Login Form -->
            <div id="login-form" class="auth-form">
                <h2>Welcome Back</h2>
                <input type="email" id="login-email" placeholder="Email" required>
                <input type="password" id="login-password" placeholder="Password" required>
                <button id="login-btn" class="btn-primary">Log In</button>
                <p class="switch-form">
                    Don't have an account? 
                    <span id="show-signup">Sign up</span>
                </p>
            </div>

            <!-- Signup Form -->
            <div id="signup-form" class="auth-form" style="display: none;">
                <h2>Create Account</h2>
                <input type="text" id="signup-username" placeholder="Username" required>
                <input type="email" id="signup-email" placeholder="Email" required>
                <input type="password" id="signup-password" placeholder="Password" required>
                <input type="password" id="signup-confirm" placeholder="Confirm Password" required>
                <button id="signup-btn" class="btn-primary">Sign Up</button>
                <p class="switch-form">
                    Already have an account? 
                    <span id="show-login">Log in</span>
                </p>
            </div>
        </div>
    </div>

    <!-- Main Chat App -->
    <div id="chat-app" class="chat-app" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-profile" id="user-profile-btn">
                    <img id="current-user-avatar" src="https://ui-avatars.com/api/?name=User&background=25d366&color=fff" alt="Profile">
                    <div class="online-indicator"></div>
                </div>
                <div class="header-actions">
                    <button id="new-chat-btn" class="icon-btn" title="New Chat">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button id="theme-toggle" class="icon-btn" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="logout-btn" class="icon-btn" title="Logout">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>

            <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" id="search-conversations" placeholder="Search conversations...">
            </div>

            <div class="conversations-list" id="conversations-list">
                <!-- Conversations will be dynamically loaded here -->
            </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-area">
            <div class="empty-state" id="empty-state">
                <i class="fas fa-comments"></i>
                <h2>Welcome to ChatApp</h2>
                <p>Select a conversation to start messaging</p>
            </div>

            <div class="chat-container" id="chat-container" style="display: none;">
                <div class="chat-header">
                    <div class="chat-header-left">
                        <button id="back-btn" class="icon-btn mobile-only">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <img id="chat-avatar" src="" alt="Avatar">
                        <div class="chat-info">
                            <h3 id="chat-name"></h3>
                            <span id="chat-status" class="chat-status"></span>
                        </div>
                    </div>
                    <div class="chat-header-right">
                        <button id="search-messages-btn" class="icon-btn" title="Search">
                            <i class="fas fa-search"></i>
                        </button>
                        <button id="chat-menu-btn" class="icon-btn" title="Menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>

                <div class="messages-container" id="messages-container">
                    <!-- Messages will be dynamically loaded here -->
                </div>

                <div class="typing-indicator" id="typing-indicator" style="display: none;">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>

                <div class="message-input-container">
                    <button id="attach-btn" class="icon-btn" title="Attach">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <button id="emoji-btn" class="icon-btn" title="Emoji">
                        <i class="fas fa-smile"></i>
                    </button>
                    <textarea id="message-input" placeholder="Type a message..." rows="1"></textarea>
                    <button id="voice-btn" class="icon-btn" title="Voice Message">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button id="send-btn" class="icon-btn send-btn" title="Send" style="display: none;">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Profile Settings</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="profile-avatar-section">
                    <img id="profile-avatar" src="" alt="Avatar">
                    <button id="change-avatar-btn">Change Photo</button>
                    <input type="file" id="avatar-input" accept="image/*" style="display: none;">
                </div>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="profile-username" placeholder="Your name">
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <input type="text" id="profile-status" placeholder="Hey there! I'm using ChatApp">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="profile-email" readonly>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-profile-btn" class="btn-primary">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- New Chat Modal -->
    <div id="new-chat-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Chat</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-users" placeholder="Search users...">
                </div>
                <div class="action-buttons">
                    <button id="new-group-btn" class="btn-secondary">
                        <i class="fas fa-users"></i> New Group
                    </button>
                </div>
                <div id="users-list" class="users-list">
                    <!-- Users will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- New Group Modal -->
    <div id="new-group-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Group</h2>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Group Name</label>
                    <input type="text" id="group-name" placeholder="Enter group name">
                </div>
                <div class="form-group">
                    <label>Add Members</label>
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="search-group-members" placeholder="Search users...">
                    </div>
                    <div id="group-members-list" class="members-selection-list">
                        <!-- Users will be loaded here with checkboxes -->
                    </div>
                </div>
                <div id="selected-members" class="selected-members">
                    <!-- Selected members will appear here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="create-group-btn" class="btn-primary">Create Group</button>
            </div>
        </div>
    </div>

    <!-- Emoji Picker -->
    <div id="emoji-picker" class="emoji-picker" style="display: none;">
        <div class="emoji-grid" id="emoji-grid">
            <!-- Emojis will be loaded here -->
        </div>
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu" style="display: none;">
        <div class="context-menu-item" data-action="reply">
            <i class="fas fa-reply"></i> Reply
        </div>
        <div class="context-menu-item" data-action="star">
            <i class="fas fa-star"></i> Star
        </div>
        <div class="context-menu-item" data-action="edit">
            <i class="fas fa-edit"></i> Edit
        </div>
        <div class="context-menu-item" data-action="delete-me">
            <i class="fas fa-trash"></i> Delete for me
        </div>
        <div class="context-menu-item" data-action="delete-everyone">
            <i class="fas fa-trash-alt"></i> Delete for everyone
        </div>
    </div>

    <!-- File Input (Hidden) -->
    <input type="file" id="file-input" style="display: none;" multiple>

    <!-- Scripts -->
    <script src="js/database.js"></script>
    <script src="js/broadcast.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
